<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Swayam Khangaonkar | Portfolio</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">

    <!-- jsPDF for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        :root {
            --primary: #6366f1;
            --secondary: #a855f7;
            --dark: #0f172a;
        }
        
        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--dark);
            color: white;
            overflow-x: hidden;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        ::-webkit-scrollbar-thumb {
            background: #4f46e5;
            border-radius: 4px;
        }

        /* --- ANIMATION STYLES --- */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .stars {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: moveStar linear infinite;
        }

        @keyframes moveStar {
            from { transform: translateY(-10vh); opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            to { transform: translateY(110vh); opacity: 0; }
        }

        .rocket-container {
            position: relative;
            z-index: 10;
            margin-bottom: 2rem;
            transition: transform 0.3s ease;
        }

        .rocket-flame {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 40px;
            background: linear-gradient(to bottom, #ffcc00, #ff3300, transparent);
            border-radius: 50% 50% 20% 20%;
            filter: blur(5px);
            animation: flame-flicker 0.1s infinite;
            opacity: 0;
            transition: opacity 0.5s;
        }

        @keyframes flame-flicker {
            0% { height: 40px; transform: translateX(-50%) scale(1); }
            50% { height: 50px; transform: translateX(-50%) scale(1.1); }
            100% { height: 40px; transform: translateX(-50%) scale(1); }
        }

        .rocket-icon {
            font-size: 100px;
            color: white;
            filter: drop-shadow(0 0 15px rgba(99, 102, 241, 0.5));
            transform: rotate(-45deg); 
        }

        .launching .rocket-icon {
            transform: translateY(-150vh) rotate(-45deg);
            transition: transform 1.5s cubic-bezier(0.55, 0.055, 0.675, 0.19);
        }
        
        .launching .rocket-flame {
            opacity: 1;
            height: 100px;
        }

        .progress-wrapper {
            width: 300px;
            position: relative;
            z-index: 10;
        }

        .percentage-text {
            font-size: 4rem;
            font-weight: 800;
            color: rgba(255,255,255,0.1);
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 0;
            white-space: nowrap;
        }
        
        .loading-bar-bg {
            width: 100%;
            height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-top: 20px;
        }

        .loading-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #4f46e5, #a855f7);
            width: 0%;
            transition: width 0.1s linear;
            box-shadow: 0 0 20px rgba(168, 85, 247, 0.6);
        }

        .white-flash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            opacity: 0;
            pointer-events: none;
            z-index: 10000;
            transition: opacity 0.1s ease;
        }

        /* Glassmorphism */
        .glass {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Modal & Carousel */
        .modal {
            transition: opacity 0.3s ease;
            background: rgba(0,0,0,0.8);
        }
        
        .carousel-container {
            position: relative;
            width: 100%;
            height: 400px;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
            overflow: hidden;
            margin-bottom: 1rem;
        }
        .carousel-img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            display: none;
        }
        .carousel-img.active {
            display: block;
        }
        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,0.5);
            color: white;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 50%;
            border: 1px solid rgba(255,255,255,0.2);
            z-index: 20;
        }
        .carousel-btn:hover { background: rgba(255,255,255,0.2); }
        .prev-btn { left: 10px; }
        .next-btn { right: 10px; }

        /* Blob Animation */
        @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        .animate-blob {
            animation: blob 7s infinite;
        }
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-4000 { animation-delay: 4s; }
    </style>
</head>
<body>

    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="stars" id="starfield"></div>
        <div class="percentage-text" id="percentage">0%</div>
        
        <div class="rocket-container">
            <i class="fas fa-rocket rocket-icon"></i>
            <div class="rocket-flame"></div>
        </div>
        
        <div class="progress-wrapper">
            <div class="flex justify-between text-xs text-indigo-300 font-mono mb-1">
                <span>SYSTEM CHECK</span>
                <span id="status-text">INITIALIZING...</span>
            </div>
            <div class="loading-bar-bg">
                <div id="loading-bar" class="loading-bar-fill"></div>
            </div>
        </div>
    </div>
    
    <div id="white-flash" class="white-flash"></div>

    <!-- Main Application -->
    <div id="app" class="hidden">
        
        <!-- Navigation -->
        <nav class="fixed top-0 w-full z-50 glass">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <div class="flex items-center cursor-pointer" onclick="router('home')">
                        <span class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-purple-600 tracking-tighter">showcase.com</span>
                    </div>
                    <div class="hidden md:block">
                        <div class="ml-10 flex items-baseline space-x-4">
                            <button onclick="router('home')" class="hover:text-indigo-400 px-3 py-2 rounded-md text-sm font-medium transition">Home</button>
                            <button onclick="router('education')" class="hover:text-indigo-400 px-3 py-2 rounded-md text-sm font-medium transition">Education</button>
                            <button onclick="router('projects')" class="hover:text-indigo-400 px-3 py-2 rounded-md text-sm font-medium transition">Projects</button>
                            <button onclick="router('hackathons')" class="hover:text-indigo-400 px-3 py-2 rounded-md text-sm font-medium transition">Hackathons</button>
                            <button onclick="router('certificates')" class="hover:text-indigo-400 px-3 py-2 rounded-md text-sm font-medium transition">Certificates</button>
                            <button onclick="router('about')" class="hover:text-indigo-400 px-3 py-2 rounded-md text-sm font-medium transition">About Me</button>
                            <button onclick="router('admin')" id="nav-admin-btn" class="bg-gray-800 hover:bg-gray-700 px-3 py-2 rounded-md text-sm font-medium transition border border-gray-600">Admin</button>
                        </div>
                    </div>
                    <!-- Mobile menu button -->
                    <div class="-mr-2 flex md:hidden">
                        <button onclick="toggleMobileMenu()" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </div>
            </div>
            <!-- Mobile Menu -->
            <div class="md:hidden hidden bg-gray-900" id="mobile-menu">
                <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                    <button onclick="router('home')" class="block w-full text-left hover:text-indigo-400 px-3 py-2 rounded-md text-base font-medium">Home</button>
                    <!-- Menu Items -->
                    <button onclick="router('education')" class="block w-full text-left hover:text-indigo-400 px-3 py-2 rounded-md text-base font-medium">Education</button>
                    <button onclick="router('projects')" class="block w-full text-left hover:text-indigo-400 px-3 py-2 rounded-md text-base font-medium">Projects</button>
                    <button onclick="router('hackathons')" class="block w-full text-left hover:text-indigo-400 px-3 py-2 rounded-md text-base font-medium">Hackathons</button>
                    <button onclick="router('certificates')" class="block w-full text-left hover:text-indigo-400 px-3 py-2 rounded-md text-base font-medium">Certificates</button>
                    <button onclick="router('about')" class="block w-full text-left hover:text-indigo-400 px-3 py-2 rounded-md text-base font-medium">About Me</button>
                    <button onclick="router('admin')" class="block w-full text-left text-red-400 hover:text-red-300 px-3 py-2 rounded-md text-base font-medium">Admin Panel</button>
                </div>
            </div>
        </nav>

        <!-- Content Container -->
        <main class="pt-16 min-h-screen">
            
            <!-- HOME SECTION -->
            <section id="home-view" class="view-section min-h-screen flex items-center justify-center relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-full overflow-hidden -z-10 opacity-20">
                    <div class="absolute top-10 left-10 w-72 h-72 bg-purple-600 rounded-full mix-blend-multiply filter blur-xl animate-blob"></div>
                    <div class="absolute top-10 right-10 w-72 h-72 bg-indigo-600 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-2000"></div>
                    <div class="absolute -bottom-8 left-20 w-72 h-72 bg-pink-600 rounded-full mix-blend-multiply filter blur-xl animate-blob animation-delay-4000"></div>
                </div>
                <div class="text-center px-4 z-10">
                    <h1 class="text-6xl md:text-8xl font-extrabold tracking-tight mb-4">
                        Hi. I'm <span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-600">Swayam Khangaonkar</span>
                    </h1>
                    <p class="text-xl md:text-2xl text-gray-300 mb-8 font-light animate-pulse">Welcome to my portfolio website</p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button onclick="router('projects')" class="px-8 py-3 bg-indigo-600 hover:bg-indigo-700 rounded-full font-bold transition transform hover:scale-105 shadow-lg shadow-indigo-500/50">
                            View My Work
                        </button>
                        <button onclick="downloadResume()" class="px-8 py-3 bg-transparent border-2 border-white hover:bg-white hover:text-black rounded-full font-bold transition transform hover:scale-105 flex items-center justify-center gap-2">
                            <i class="fas fa-file-pdf"></i> Download Resume
                        </button>
                    </div>
                </div>
            </section>

            <!-- EDUCATION SECTION -->
            <section id="education-view" class="view-section hidden max-w-7xl mx-auto px-4 py-12">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-4xl font-bold border-l-4 border-indigo-500 pl-4">Education</h2>
                </div>
                <div id="education-list" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Dynamic Content -->
                </div>
            </section>

            <!-- PROJECTS SECTION -->
            <section id="projects-view" class="view-section hidden max-w-7xl mx-auto px-4 py-12">
                <div class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
                    <h2 class="text-4xl font-bold border-l-4 border-indigo-500 pl-4">Projects</h2>
                    <div class="flex gap-2 w-full md:w-auto">
                        <div class="relative flex-grow md:flex-grow-0">
                            <input type="text" id="search-projects" placeholder="Search projects..." class="w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 focus:outline-none focus:border-indigo-500">
                            <i class="fas fa-search absolute right-3 top-3 text-gray-500"></i>
                        </div>
                        <button onclick="toggleFilter('project-filter-modal')" class="bg-gray-800 px-4 py-2 rounded-lg hover:bg-gray-700"><i class="fas fa-filter"></i></button>
                    </div>
                </div>
                <div id="projects-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
            </section>

            <!-- HACKATHONS SECTION -->
            <section id="hackathons-view" class="view-section hidden max-w-7xl mx-auto px-4 py-12">
                <div class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
                    <h2 class="text-4xl font-bold border-l-4 border-indigo-500 pl-4">Hackathons</h2>
                    <div class="flex gap-2 w-full md:w-auto">
                        <div class="relative flex-grow md:flex-grow-0">
                            <input type="text" id="search-hackathons" placeholder="Search hackathons..." class="w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 focus:outline-none focus:border-indigo-500">
                            <i class="fas fa-search absolute right-3 top-3 text-gray-500"></i>
                        </div>
                        <button onclick="toggleFilter('hackathon-filter-modal')" class="bg-gray-800 px-4 py-2 rounded-lg hover:bg-gray-700"><i class="fas fa-filter"></i></button>
                    </div>
                </div>
                <div id="hackathons-list" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>
            </section>

            <!-- CERTIFICATES SECTION -->
            <section id="certificates-view" class="view-section hidden max-w-7xl mx-auto px-4 py-12">
                <div class="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
                    <h2 class="text-4xl font-bold border-l-4 border-indigo-500 pl-4">Certificates</h2>
                    <div class="flex gap-2 w-full md:w-auto">
                         <div class="relative flex-grow md:flex-grow-0">
                            <input type="text" id="search-certificates" placeholder="Search..." class="w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 focus:outline-none focus:border-indigo-500">
                            <i class="fas fa-search absolute right-3 top-3 text-gray-500"></i>
                        </div>
                    </div>
                </div>
                <div id="certificates-list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
            </section>

            <!-- ABOUT ME SECTION -->
            <section id="about-view" class="view-section hidden max-w-7xl mx-auto px-4 py-12">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-4xl font-bold border-l-4 border-indigo-500 pl-4">About Me</h2>
                </div>
                <div class="glass rounded-2xl p-8 md:p-12 flex flex-col md:flex-row items-center gap-12">
                    <div class="w-full md:w-1/3 flex justify-center">
                        <div class="relative w-64 h-64 rounded-full overflow-hidden border-4 border-indigo-500 shadow-2xl">
                            <img id="about-img" src="https://via.placeholder.com/300" alt="Swayam Khangaonkar" class="w-full h-full object-cover">
                        </div>
                    </div>
                    <div class="w-full md:w-2/3">
                        <h3 class="text-2xl font-bold mb-4 text-indigo-400">Swayam Khangaonkar</h3>
                        <p id="about-text" class="text-gray-300 leading-relaxed text-lg whitespace-pre-line">
                            Loading profile...
                        </p>
                    </div>
                </div>
            </section>

            <!-- ADMIN LOGIN & DASHBOARD -->
            <section id="admin-view" class="view-section hidden max-w-7xl mx-auto px-4 py-12">
                <!-- Login Form -->
                <div id="login-form" class="max-w-md mx-auto glass p-8 rounded-xl shadow-2xl mt-20">
                    <h2 class="text-2xl font-bold mb-6 text-center">Admin Login</h2>
                    <input type="text" id="admin-user" placeholder="Username" class="w-full bg-gray-900 border border-gray-700 p-3 rounded mb-4 focus:border-indigo-500 outline-none">
                    <input type="password" id="admin-pass" placeholder="Password" class="w-full bg-gray-900 border border-gray-700 p-3 rounded mb-6 focus:border-indigo-500 outline-none">
                    <button onclick="adminLogin()" class="w-full bg-indigo-600 hover:bg-indigo-700 py-3 rounded font-bold transition">Login</button>
                    <p class="mt-4 text-xs text-gray-500 text-center">Local mode: User 'admin', Pass 'admin123'</p>
                </div>

                <!-- Admin Dashboard -->
                <div id="admin-dashboard" class="hidden">
                    <div class="flex justify-between items-center mb-8">
                        <h2 class="text-3xl font-bold">Admin Dashboard</h2>
                        <button onclick="adminLogout()" class="bg-red-600 px-4 py-2 rounded hover:bg-red-700">Logout</button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <!-- Visitor Tracker (MOCKED FOR FRONTEND-ONLY) -->
                        <div class="glass p-6 rounded-xl">
                            <h3 class="text-xl font-bold mb-4 text-indigo-400">Session Logs</h3>
                            <p class="text-xs text-gray-400 mb-2">Note: Backend disabled. Showing local session history.</p>
                            <div class="overflow-y-auto h-96 custom-scrollbar">
                                <table class="w-full text-sm text-left">
                                    <thead class="text-gray-400 uppercase border-b border-gray-700">
                                        <tr><th class="py-3">Time</th><th class="py-3">Platform</th></tr>
                                    </thead>
                                    <tbody id="visitor-log-body" class="text-gray-300"></tbody>
                                </table>
                            </div>
                        </div>
                        <!-- Quick Actions (ADD BUTTONS ARE HERE) -->
                        <div class="glass p-6 rounded-xl">
                            <h3 class="text-xl font-bold mb-4 text-indigo-400">Quick Actions</h3>
                            <p class="text-gray-400 mb-4">Use these buttons to Add or Edit content. "Add" buttons are only visible here.</p>
                            <div class="grid grid-cols-1 gap-4">
                                <button onclick="openEditor('education')" class="p-4 bg-green-700 rounded hover:bg-green-600 flex justify-between items-center">
                                    <span>Add New Education</span> <i class="fas fa-plus"></i>
                                </button>
                                <button onclick="openEditor('projects')" class="p-4 bg-green-700 rounded hover:bg-green-600 flex justify-between items-center">
                                    <span>Add New Project</span> <i class="fas fa-plus"></i>
                                </button>
                                <button onclick="openEditor('hackathons')" class="p-4 bg-green-700 rounded hover:bg-green-600 flex justify-between items-center">
                                    <span>Add New Hackathon</span> <i class="fas fa-plus"></i>
                                </button>
                                <button onclick="openEditor('certificates')" class="p-4 bg-green-700 rounded hover:bg-green-600 flex justify-between items-center">
                                    <span>Add New Certificate</span> <i class="fas fa-plus"></i>
                                </button>
                                <button onclick="openEditor('about')" class="p-4 bg-blue-700 rounded hover:bg-blue-600 flex justify-between items-center">
                                    <span>Edit About Me</span> <i class="fas fa-edit"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- FOOTER -->
            <footer class="bg-black py-12 border-t border-gray-800 mt-12">
                <div class="max-w-7xl mx-auto px-4 grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-bold mb-4 text-white">Quick Links</h3>
                        <div class="grid grid-cols-2 gap-2">
                            <button onclick="router('home')" class="text-left text-gray-400 hover:text-white transition">Home</button>
                            <button onclick="router('education')" class="text-left text-gray-400 hover:text-white transition">Education</button>
                            <button onclick="router('projects')" class="text-left text-gray-400 hover:text-white transition">Projects</button>
                            <button onclick="router('hackathons')" class="text-left text-gray-400 hover:text-white transition">Hackathons</button>
                            <button onclick="router('certificates')" class="text-left text-gray-400 hover:text-white transition">Certificates</button>
                            <button onclick="router('about')" class="text-left text-gray-400 hover:text-white transition">About Me</button>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold mb-4 text-white">Connect with me</h3>
                        <div class="flex space-x-6">
                            <a href="https://instagram.com/kswayammmm" target="_blank" class="text-3xl text-gray-400 hover:text-pink-500 transition transform hover:scale-110"><i class="fab fa-instagram"></i></a>
                            <a href="https://www.linkedin.com/in/swayam-khangaonkar-227bab345" target="_blank" class="text-3xl text-gray-400 hover:text-blue-500 transition transform hover:scale-110"><i class="fab fa-linkedin"></i></a>
                            <a href="https://x.com" target="_blank" class="text-3xl text-gray-400 hover:text-white transition transform hover:scale-110"><i class="fab fa-twitter"></i></a>
                            <span class="text-3xl text-gray-400 hover:text-green-500 transition transform hover:scale-110 cursor-pointer"><i class="fab fa-whatsapp"></i></span>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-12 text-gray-600 text-sm">
                    &copy; 2025 Swayam Khangaonkar. All Rights Reserved.
                </div>
            </footer>

        </main>

        <!-- MODALS -->
        
        <!-- Filter Modal (Projects) -->
        <div id="project-filter-modal" class="fixed inset-0 bg-black bg-opacity-90 hidden z-50 flex items-center justify-center">
            <div class="bg-gray-900 p-6 rounded-xl w-80 border border-gray-700">
                <h3 class="text-xl font-bold mb-4">Filter Projects</h3>
                <div class="space-y-2">
                    <label class="flex items-center space-x-2"><input type="checkbox" class="form-checkbox" value="AI" onchange="applyProjectFilter()"> <span>AI / ML</span></label>
                    <label class="flex items-center space-x-2"><input type="checkbox" class="form-checkbox" value="Blockchain" onchange="applyProjectFilter()"> <span>Blockchain</span></label>
                    <label class="flex items-center space-x-2"><input type="checkbox" class="form-checkbox" value="Web" onchange="applyProjectFilter()"> <span>Web Dev</span></label>
                </div>
                <button onclick="toggleFilter('project-filter-modal')" class="mt-6 w-full bg-gray-700 py-2 rounded">Close</button>
            </div>
        </div>

        <!-- Filter Modal (Hackathons) -->
        <div id="hackathon-filter-modal" class="fixed inset-0 bg-black bg-opacity-90 hidden z-50 flex items-center justify-center">
            <div class="bg-gray-900 p-6 rounded-xl w-80 border border-gray-700">
                <h3 class="text-xl font-bold mb-4">Filter Hackathons</h3>
                <div class="space-y-2">
                    <label class="flex items-center space-x-2"><input type="radio" name="h-mode" value="all" checked onchange="applyHackathonFilter()"> <span>All</span></label>
                    <label class="flex items-center space-x-2"><input type="radio" name="h-mode" value="online" onchange="applyHackathonFilter()"> <span>Online</span></label>
                    <label class="flex items-center space-x-2"><input type="radio" name="h-mode" value="offline" onchange="applyHackathonFilter()"> <span>Offline</span></label>
                </div>
                <button onclick="toggleFilter('hackathon-filter-modal')" class="mt-6 w-full bg-gray-700 py-2 rounded">Close</button>
            </div>
        </div>

        <!-- Generic Editor Modal (Add/Edit) -->
        <div id="editor-modal" class="fixed inset-0 z-[60] hidden overflow-y-auto">
            <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div class="fixed inset-0 bg-gray-900 bg-opacity-95 transition-opacity" onclick="closeEditor()"></div>
                <div class="inline-block align-bottom bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg w-full">
                    <div class="px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                        <h3 class="text-lg leading-6 font-medium text-white mb-4" id="editor-title">Edit Item</h3>
                        <form id="editor-form" class="space-y-4">
                            <!-- Dynamic Form Fields injected here -->
                        </form>
                    </div>
                    <div class="bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                        <button type="button" id="save-btn" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm">Save</button>
                        <button type="button" onclick="closeEditor()" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-500 shadow-sm px-4 py-2 bg-gray-800 text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Detail Pop-up Modal (Carousel) -->
        <div id="detail-modal" class="fixed inset-0 z-[70] hidden overflow-y-auto">
            <div class="flex items-center justify-center min-h-screen px-4 text-center">
                <div class="fixed inset-0 bg-black bg-opacity-95 transition-opacity" onclick="closeDetail()"></div>
                <div class="relative inline-block bg-gray-900 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:max-w-4xl w-full border border-gray-700">
                    <div class="p-6" id="detail-content">
                        <!-- Content Injected via JS -->
                    </div>
                    <button onclick="closeDetail()" class="absolute top-4 right-4 text-gray-400 hover:text-white text-2xl">&times;</button>
                </div>
            </div>
        </div>

    </div>

    <script>
        // --- CONFIGURATION ---
        // Removed Firebase Config

        // --- INITIALIZATION ---
        let isAdmin = false;
        let collectionData = {
            education: [],
            projects: [],
            hackathons: [],
            certificates: [],
            about: {}
        };

        // --- LOCAL STORAGE HELPERS ---
        const DB_KEY = 'swayam_portfolio_db';
        const VISIT_KEY = 'swayam_portfolio_visits';

        function loadData() {
            const stored = localStorage.getItem(DB_KEY);
            if (stored) {
                collectionData = JSON.parse(stored);
            } else {
                // Defaults if empty
                collectionData = {
                    education: [],
                    projects: [],
                    hackathons: [],
                    certificates: [],
                    about: { text: "Welcome to my portfolio.", photos: [] }
                };
                saveDataToStorage();
            }
            renderAll();
        }

        function saveDataToStorage() {
            try {
                localStorage.setItem(DB_KEY, JSON.stringify(collectionData));
            } catch (e) {
                alert("Storage Full! Cannot save more photos. Try using smaller images.");
                console.error(e);
            }
        }

        window.onload = function() {
            generateStars();
            startAnimation();
            loadData();
            logLocalVisit();
        };

        // --- ANIMATION LOGIC ---
        function generateStars() {
            const starfield = document.getElementById('starfield');
            for(let i=0; i<50; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const size = Math.random() * 3 + 1;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.animationDuration = `${Math.random() * 2 + 1}s`;
                star.style.animationDelay = `${Math.random()}s`;
                starfield.appendChild(star);
            }
        }

        function startAnimation() {
            let percentage = 0;
            const percentageEl = document.getElementById('percentage');
            const loadingBar = document.getElementById('loading-bar');
            const statusText = document.getElementById('status-text');
            const loadingScreen = document.getElementById('loading-screen');
            const appDiv = document.getElementById('app');
            const whiteFlash = document.getElementById('white-flash');
            const rocket = document.querySelector('.rocket-container');

            const duration = 5000; 
            const interval = 50;
            const step = 100 / (duration / interval);

            const timer = setInterval(() => {
                percentage += step;
                if (percentage >= 100) percentage = 100;

                percentageEl.innerText = Math.round(percentage) + '%';
                loadingBar.style.width = percentage + '%';

                if (percentage > 20 && percentage < 40) statusText.innerText = "FUELING ENGINES...";
                if (percentage > 40 && percentage < 60) statusText.innerText = "CALIBRATING SENSORS...";
                if (percentage > 60 && percentage < 80) statusText.innerText = "IGNITION SEQUENCE START...";
                if (percentage > 80) statusText.innerText = "READY FOR LIFTOFF...";

                if (percentage >= 100) {
                    clearInterval(timer);
                    rocket.classList.add('launching');
                    statusText.innerText = "LIFTOFF!";
                    setTimeout(() => {
                        whiteFlash.style.opacity = '1';
                        setTimeout(() => {
                            loadingScreen.style.display = 'none';
                            appDiv.classList.remove('hidden');
                            whiteFlash.style.opacity = '0';
                            setTimeout(() => whiteFlash.style.display = 'none', 1000);
                        }, 2000); 
                    }, 1200); 
                }
            }, interval);
        }

        // --- PDF RESUME DOWNLOAD ---
        function downloadResume() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.setFont("helvetica", "bold");
            doc.setFontSize(22);
            doc.text("SWAYAM KHANGAONKAR", 20, 20);
            
            doc.setFontSize(12);
            doc.setFont("helvetica", "normal");
            doc.text("Portfolio: showcase.com", 20, 30);
            doc.line(20, 35, 190, 35);

            doc.setFont("helvetica", "bold");
            doc.text("EDUCATION", 20, 45);
            doc.setFont("helvetica", "normal");
            doc.text("Visit showcase.com to see detailed educational background.", 20, 52);

            doc.setFont("helvetica", "bold");
            doc.text("PROJECTS", 20, 65);
            doc.setFont("helvetica", "normal");
            doc.text("Projects including AI/ML, Blockchain, and Web Dev are available online.", 20, 72);

            doc.setFont("helvetica", "bold");
            doc.text("HACKATHONS", 20, 85);
            doc.setFont("helvetica", "normal");
            doc.text("A history of hackathon participation is documented on the portfolio.", 20, 92);
            
            doc.setFont("helvetica", "bold");
            doc.text("CONTACT", 20, 105);
            doc.setFont("helvetica", "normal");
            doc.text("Instagram: kswayammmm", 20, 112);
            
            doc.save("Swayam_Khangaonkar_Resume.pdf");
        }

        // --- MOCKED VISITOR TRACKING ---
        function logLocalVisit() {
            let visits = JSON.parse(localStorage.getItem(VISIT_KEY) || '[]');
            // Only keep last 20
            if (visits.length > 20) visits.pop();
            
            visits.unshift({
                time: new Date().toLocaleString(),
                platform: navigator.platform
            });
            
            localStorage.setItem(VISIT_KEY, JSON.stringify(visits));
            renderVisitorLogs();
        }

        function renderVisitorLogs() {
            if (!isAdmin) return;
            const visits = JSON.parse(localStorage.getItem(VISIT_KEY) || '[]');
            const tbody = document.getElementById('visitor-log-body');
            tbody.innerHTML = visits.map(v => `
                <tr class="border-b border-gray-800">
                    <td class="py-2">${v.time}</td>
                    <td class="py-2 text-xs truncate max-w-xs">${v.platform}</td>
                </tr>
            `).join('');
        }

        // --- RENDERING ---
        function renderAll() {
            ['education', 'projects', 'hackathons', 'certificates'].forEach(renderCollection);
            
            // Render About
            if (collectionData.about) {
                document.getElementById('about-text').innerText = collectionData.about.text || "Welcome to my profile.";
                const photo = (collectionData.about.photos && collectionData.about.photos.length > 0) 
                    ? collectionData.about.photos[0] 
                    : 'https://via.placeholder.com/300';
                document.getElementById('about-img').src = photo;
            }
        }

        function renderCollection(type) {
            const container = document.getElementById(`${type}-list`);
            container.innerHTML = '';
            let data = collectionData[type] || [];

            if (type === 'projects') data = filterProjects(data);
            if (type === 'hackathons') data = filterHackathons(data);
            if (type === 'certificates') data = searchFilter(data, 'search-certificates', ['title', 'issuer']);

            data.forEach(item => {
                let cardHTML = '';
                const adminControls = isAdmin ? `
                    <div class="absolute top-2 right-2 flex gap-2 z-10">
                        <button onclick="openEditor('${type}', '${item.id}')" class="bg-blue-600 p-1 rounded text-xs text-white"><i class="fas fa-edit"></i></button>
                        <button onclick="deleteItem('${type}', '${item.id}')" class="bg-red-600 p-1 rounded text-xs text-white"><i class="fas fa-trash"></i></button>
                    </div>
                ` : '';
                
                const coverImg = (item.photos && item.photos.length > 0) ? item.photos[0] : null;
                const imgHtml = coverImg ? `<div class="h-48 w-full mb-4 rounded-lg overflow-hidden"><img src="${coverImg}" class="w-full h-full object-cover"></div>` : '';

                if (type === 'education') {
                    cardHTML = `
                        <div class="glass p-6 rounded-xl hover:bg-gray-800 transition cursor-pointer relative group" onclick="showDetails('education', '${item.id}')">
                            ${adminControls}
                            ${imgHtml}
                            <h3 class="text-xl font-bold text-indigo-400">${item.degree || 'Degree'}</h3>
                            <p class="text-lg font-semibold">${item.school || 'Institution'}</p>
                            <p class="text-gray-400 text-sm mb-2">${item.year || 'Year'}</p>
                            <p class="text-gray-300 line-clamp-2">${item.description || ''}</p>
                            <p class="mt-2 text-xs text-indigo-300">Click for details & photos</p>
                        </div>
                    `;
                } else if (type === 'projects') {
                    cardHTML = `
                        <div class="glass p-6 rounded-xl hover:transform hover:-translate-y-1 transition relative">
                            ${adminControls}
                            ${imgHtml}
                            <h3 class="text-xl font-bold text-white mb-2">${item.title || 'Project'}</h3>
                            <div class="flex gap-2 mb-3">
                                ${(item.tags || '').split(',').map(t => `<span class="text-xs bg-indigo-900 px-2 py-1 rounded text-indigo-200">${t.trim()}</span>`).join('')}
                            </div>
                            <p class="text-gray-400 text-sm mb-4 line-clamp-3">${item.description || ''}</p>
                            <button onclick="showDetails('projects', '${item.id}')" class="text-indigo-400 hover:text-white text-sm font-bold">View Details <i class="fas fa-arrow-right"></i></button>
                        </div>
                    `;
                } else if (type === 'hackathons') {
                    const locationDisplay = item.mode === 'online' ? 
                        '<span class="text-green-400"><i class="fas fa-globe"></i> Online</span>' : 
                        `<span class="text-yellow-400"><i class="fas fa-map-marker-alt"></i> ${item.location || 'Collage'}</span>`;
                    
                    cardHTML = `
                        <div class="glass p-6 rounded-xl relative">
                            ${adminControls}
                            ${imgHtml}
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="text-xl font-bold">${item.name || 'Hackathon'}</h3>
                                <span class="text-xs border border-gray-600 px-2 py-1 rounded uppercase">${item.mode || 'Offline'}</span>
                            </div>
                            <div class="mb-3 text-sm">${locationDisplay}</div>
                            <p class="text-gray-400 text-sm mb-3">${item.description || ''}</p>
                             <button onclick="showDetails('hackathons', '${item.id}')" class="text-indigo-400 hover:text-white text-sm font-bold">View Details <i class="fas fa-arrow-right"></i></button>
                        </div>
                    `;
                } else if (type === 'certificates') {
                     cardHTML = `
                        <div class="glass p-4 rounded-xl relative hover:bg-gray-800 transition">
                            ${adminControls}
                            <div class="h-32 bg-gray-800 rounded mb-3 overflow-hidden">
                                ${coverImg ? `<img src="${coverImg}" class="w-full h-full object-cover" onclick="window.open('${coverImg}')">` : '<div class="w-full h-full flex items-center justify-center text-gray-600"><i class="fas fa-certificate fa-2x"></i></div>'}
                            </div>
                            <h4 class="font-bold text-white truncate">${item.title || 'Certificate'}</h4>
                            <p class="text-xs text-gray-400">${item.issuer || 'Issuer'}</p>
                        </div>
                    `;
                }
                container.innerHTML += cardHTML;
            });
        }

        // --- SEARCH & FILTER LOGIC ---
        function filterProjects(data) {
            const search = document.getElementById('search-projects').value.toLowerCase();
            const checkboxes = document.querySelectorAll('#project-filter-modal input[type="checkbox"]:checked');
            const selectedTags = Array.from(checkboxes).map(cb => cb.value.toLowerCase());
            return data.filter(item => {
                const matchesSearch = (item.title || '').toLowerCase().includes(search);
                const itemTags = (item.tags || '').toLowerCase();
                const matchesTags = selectedTags.length === 0 || selectedTags.some(tag => itemTags.includes(tag));
                return matchesSearch && matchesTags;
            });
        }
        function filterHackathons(data) {
            const search = document.getElementById('search-hackathons').value.toLowerCase();
            const mode = document.querySelector('input[name="h-mode"]:checked').value;
            return data.filter(item => {
                const matchesSearch = (item.name || '').toLowerCase().includes(search);
                const matchesMode = mode === 'all' || (item.mode || 'offline').toLowerCase() === mode;
                return matchesSearch && matchesMode;
            });
        }
        function searchFilter(data, inputId, fields) {
            const search = document.getElementById(inputId).value.toLowerCase();
            return data.filter(item => fields.some(field => (item[field] || '').toLowerCase().includes(search)));
        }
        document.getElementById('search-projects').addEventListener('input', () => renderCollection('projects'));
        document.getElementById('search-hackathons').addEventListener('input', () => renderCollection('hackathons'));
        document.getElementById('search-certificates').addEventListener('input', () => renderCollection('certificates'));
        function toggleFilter(modalId) { document.getElementById(modalId).classList.toggle('hidden'); }
        function applyProjectFilter() { renderCollection('projects'); }
        function applyHackathonFilter() { renderCollection('hackathons'); }

        // --- ROUTING ---
        function router(viewId) {
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            document.getElementById('mobile-menu').classList.add('hidden');
            if (viewId === 'admin') {
                document.getElementById('admin-view').classList.remove('hidden');
                if (isAdmin) {
                    document.getElementById('login-form').classList.add('hidden');
                    document.getElementById('admin-dashboard').classList.remove('hidden');
                } else {
                    document.getElementById('login-form').classList.remove('hidden');
                    document.getElementById('admin-dashboard').classList.add('hidden');
                }
            } else {
                document.getElementById(`${viewId}-view`).classList.remove('hidden');
            }
            window.scrollTo(0,0);
        }
        function toggleMobileMenu() { document.getElementById('mobile-menu').classList.toggle('hidden'); }

        // --- ADMIN ACTIONS ---
        function adminLogin() {
            const u = document.getElementById('admin-user').value;
            const p = document.getElementById('admin-pass').value;
            if (u === 'admin' && p === 'admin123') {
                isAdmin = true;
                document.getElementById('nav-admin-btn').classList.add('text-green-400');
                router('admin');
                renderAll(); 
                renderVisitorLogs();
            } else { alert('Invalid credentials'); }
        }

        function adminLogout() {
            isAdmin = false;
            document.getElementById('nav-admin-btn').classList.remove('text-green-400');
            document.getElementById('admin-user').value = '';
            document.getElementById('admin-pass').value = '';
            router('home');
            renderAll();
        }

        // --- EDITOR MODAL LOGIC & IMAGE HANDLING ---
        let currentEditType = null;
        let currentEditId = null;
        let tempPhotos = []; 

        function openEditor(type, id = null) {
            currentEditType = type;
            currentEditId = id;
            tempPhotos = []; // Reset
            
            const modal = document.getElementById('editor-modal');
            const form = document.getElementById('editor-form');
            const title = document.getElementById('editor-title');
            
            title.innerText = id ? `Edit ${type}` : `Add New ${type}`;
            form.innerHTML = '';

            let data = {};
            if (id && type !== 'about') {
                data = collectionData[type].find(i => i.id === id) || {};
                tempPhotos = data.photos || [];
            } else if (type === 'about') {
                 data = collectionData.about || {};
                 tempPhotos = data.photos || [];
            }

            // Common Image Input Helper
            const imgInputHtml = `
                <label class="block text-sm text-gray-400 mb-1">Upload Photos (Max 15)</label>
                <input type="file" id="in-files" multiple accept="image/*" onchange="handleFileSelect(this)" class="w-full bg-gray-700 p-2 rounded text-white mb-2">
                <div id="preview-area" class="flex flex-wrap gap-2 mb-2"></div>
                <input type="text" id="in-urls" placeholder="Or paste Image URLs (comma separated)" class="w-full bg-gray-700 p-2 rounded text-white text-xs mb-2">
            `;

            if (type === 'education') {
                form.innerHTML = `
                    <input type="text" id="in-school" placeholder="School/College Name" value="${data.school||''}" class="w-full bg-gray-700 p-2 rounded text-white mb-2">
                    <input type="text" id="in-degree" placeholder="Degree" value="${data.degree||''}" class="w-full bg-gray-700 p-2 rounded text-white mb-2">
                    <input type="text" id="in-year" placeholder="Year" value="${data.year||''}" class="w-full bg-gray-700 p-2 rounded text-white mb-2">
                    <textarea id="in-desc" placeholder="Description" class="w-full bg-gray-700 p-2 rounded text-white mb-2 h-24">${data.description||''}</textarea>
                    ${imgInputHtml}
                `;
            } else if (type === 'projects') {
                form.innerHTML = `
                    <input type="text" id="in-title" placeholder="Project Title" value="${data.title||''}" class="w-full bg-gray-700 p-2 rounded text-white mb-2">
                    <textarea id="in-desc" placeholder="Details" class="w-full bg-gray-700 p-2 rounded text-white mb-2 h-32">${data.description||''}</textarea>
                    <input type="text" id="in-tags" placeholder="Tags" value="${data.tags||''}" class="w-full bg-gray-700 p-2 rounded text-white mb-2">
                    <input type="text" id="in-link" placeholder="Link" value="${data.link||''}" class="w-full bg-gray-700 p-2 rounded text-white mb-2">
                    ${imgInputHtml}
                `;
            } else if (type === 'hackathons') {
                const isOnline = data.mode === 'online';
                form.innerHTML = `
                    <input type="text" id="in-name" placeholder="Hackathon Name" value="${data.name||''}" class="w-full bg-gray-700 p-2 rounded text-white mb-2">
                    <textarea id="in-desc" placeholder="Description" class="w-full bg-gray-700 p-2 rounded text-white mb-2 h-24">${data.description||''}</textarea>
                    <input type="text" id="in-host" placeholder="Host Link" value="${data.hostLink||''}" class="w-full bg-gray-700 p-2 rounded text-white mb-2">
                    <select id="in-mode" onchange="toggleLocInput()" class="w-full bg-gray-700 p-2 rounded text-white mb-2">
                        <option value="offline" ${!isOnline?'selected':''}>Offline</option>
                        <option value="online" ${isOnline?'selected':''}>Online</option>
                    </select>
                    <div id="loc-wrapper" class="${isOnline?'hidden':''}">
                        <input type="text" id="in-loc" placeholder="College Name" value="${data.location||''}" class="w-full bg-gray-700 p-2 rounded text-white mb-2">
                    </div>
                    ${imgInputHtml}
                `;
            } else if (type === 'certificates') {
                form.innerHTML = `
                    <input type="text" id="in-title" placeholder="Certificate Name" value="${data.title||''}" class="w-full bg-gray-700 p-2 rounded text-white mb-2">
                    <input type="text" id="in-issuer" placeholder="Issuer" value="${data.issuer||''}" class="w-full bg-gray-700 p-2 rounded text-white mb-2">
                    ${imgInputHtml}
                `;
            } else if (type === 'about') {
                form.innerHTML = `
                    <textarea id="in-text" placeholder="About Me Text" class="w-full bg-gray-700 p-2 rounded text-white mb-2 h-64">${data.text||''}</textarea>
                    ${imgInputHtml}
                `;
            }

            updatePreview();
            document.getElementById('save-btn').onclick = saveData;
            document.getElementById('editor-modal').classList.remove('hidden');
        }

        function toggleLocInput() {
            const mode = document.getElementById('in-mode').value;
            const wrapper = document.getElementById('loc-wrapper');
            if (mode === 'online') wrapper.classList.add('hidden'); else wrapper.classList.remove('hidden');
        }

        function closeEditor() { document.getElementById('editor-modal').classList.add('hidden'); }

        // Handle Files
        function handleFileSelect(input) {
            if (input.files) {
                const files = Array.from(input.files);
                if (tempPhotos.length + files.length > 15) {
                    alert("Max 15 photos allowed");
                    return;
                }
                files.forEach(file => {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        // Basic Compression via Canvas
                        const img = new Image();
                        img.onload = () => {
                            const canvas = document.createElement('canvas');
                            const MAX_WIDTH = 500; // Slightly reduced for LocalStorage limits
                            const scaleSize = MAX_WIDTH / img.width;
                            canvas.width = MAX_WIDTH;
                            canvas.height = img.height * scaleSize;
                            const ctx = canvas.getContext('2d');
                            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                            const dataUrl = canvas.toDataURL('image/jpeg', 0.6); // Lower quality for storage
                            tempPhotos.push(dataUrl);
                            updatePreview();
                        }
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                });
            }
        }

        function updatePreview() {
            const area = document.getElementById('preview-area');
            area.innerHTML = tempPhotos.map((src, idx) => `
                <div class="relative w-16 h-16">
                    <img src="${src}" class="w-full h-full object-cover rounded">
                    <button onclick="removePhoto(${idx})" class="absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-4 h-4 text-xs flex items-center justify-center">&times;</button>
                </div>
            `).join('');
        }

        window.removePhoto = function(idx) {
            tempPhotos.splice(idx, 1);
            updatePreview();
        }

        async function saveData() {
            const type = currentEditType;
            const id = currentEditId;
            
            // Merge manual URLs
            const urlInput = document.getElementById('in-urls');
            if (urlInput && urlInput.value.trim()) {
                const urls = urlInput.value.split(',').map(s => s.trim()).filter(s => s);
                if (tempPhotos.length + urls.length <= 15) {
                    tempPhotos = tempPhotos.concat(urls);
                }
            }

            let newItem = { 
                id: id || Date.now().toString(), // Generate simple ID
                photos: tempPhotos 
            }; 

            if (type === 'education') {
                Object.assign(newItem, {
                    school: document.getElementById('in-school').value,
                    degree: document.getElementById('in-degree').value,
                    year: document.getElementById('in-year').value,
                    description: document.getElementById('in-desc').value
                });
            } else if (type === 'projects') {
                Object.assign(newItem, {
                    title: document.getElementById('in-title').value,
                    description: document.getElementById('in-desc').value,
                    tags: document.getElementById('in-tags').value,
                    link: document.getElementById('in-link').value
                });
            } else if (type === 'hackathons') {
                const mode = document.getElementById('in-mode').value;
                Object.assign(newItem, {
                    name: document.getElementById('in-name').value,
                    description: document.getElementById('in-desc').value,
                    hostLink: document.getElementById('in-host').value,
                    mode: mode,
                    location: mode === 'online' ? 'Online' : document.getElementById('in-loc').value
                });
            } else if (type === 'certificates') {
                Object.assign(newItem, {
                    title: document.getElementById('in-title').value,
                    issuer: document.getElementById('in-issuer').value
                });
            } else if (type === 'about') {
                collectionData.about = {
                    text: document.getElementById('in-text').value,
                    photos: tempPhotos
                };
                saveDataToStorage();
                renderAll();
                closeEditor();
                return;
            }

            // Push to local array
            if (id) {
                const index = collectionData[type].findIndex(i => i.id === id);
                if (index !== -1) collectionData[type][index] = newItem;
            } else {
                collectionData[type].push(newItem);
            }

            saveDataToStorage();
            renderAll();
            closeEditor();
        }

        async function deleteItem(type, id) {
            if(!confirm("Delete this item?")) return;
            collectionData[type] = collectionData[type].filter(i => i.id !== id);
            saveDataToStorage();
            renderAll();
        }

        // --- DETAIL POP-UP WITH CAROUSEL ---
        let currentCarouselIdx = 0;
        let currentCarouselPhotos = [];

        function showDetails(type, id) {
            const item = collectionData[type].find(i => i.id === id);
            if (!item) return;

            currentCarouselPhotos = item.photos || [];
            currentCarouselIdx = 0;

            const content = document.getElementById('detail-content');
            content.innerHTML = ''; 

            let carouselHtml = '';
            if (currentCarouselPhotos.length > 0) {
                carouselHtml = `
                    <div class="carousel-container group">
                        ${currentCarouselPhotos.length > 1 ? `<div class="carousel-btn prev-btn" onclick="moveCarousel(-1)"><i class="fas fa-chevron-left"></i></div>` : ''}
                        ${currentCarouselPhotos.map((src, i) => `<img src="${src}" class="carousel-img ${i===0?'active':''}" id="c-img-${i}">`).join('')}
                        ${currentCarouselPhotos.length > 1 ? `<div class="carousel-btn next-btn" onclick="moveCarousel(1)"><i class="fas fa-chevron-right"></i></div>` : ''}
                    </div>
                `;
            }

            let bodyHtml = '';
            if (type === 'education') {
                bodyHtml = `
                    <h2 class="text-3xl font-bold text-indigo-400 mb-2">${item.school}</h2>
                    <h3 class="text-xl text-white mb-4">${item.degree} (${item.year})</h3>
                    <div class="prose prose-invert max-w-none mb-6 text-gray-300">${item.description}</div>
                `;
            } else if (type === 'projects') {
                bodyHtml = `
                    <h2 class="text-3xl font-bold text-indigo-400 mb-2">${item.title}</h2>
                    <div class="flex gap-2 mb-4">${(item.tags || '').split(',').map(t => `<span class="px-2 py-1 bg-gray-700 rounded text-sm">${t}</span>`).join('')}</div>
                    <div class="prose prose-invert max-w-none mb-6 text-gray-300 whitespace-pre-line">${item.description}</div>
                    ${item.link ? `<a href="${item.link}" target="_blank" class="bg-indigo-600 px-6 py-2 rounded font-bold inline-block hover:bg-indigo-700">Visit Project</a>` : ''}
                `;
            } else if (type === 'hackathons') {
                bodyHtml = `
                    <h2 class="text-3xl font-bold text-indigo-400 mb-2">${item.name}</h2>
                    <p class="text-lg text-gray-400 mb-2">${item.mode === 'online' ? 'Online' : item.location}</p>
                    <div class="prose prose-invert max-w-none mb-6 text-gray-300 whitespace-pre-line">${item.description}</div>
                    ${item.hostLink ? `<a href="${item.hostLink}" target="_blank" class="bg-indigo-600 px-6 py-2 rounded font-bold inline-block hover:bg-indigo-700">Host Link</a>` : ''}
                `;
            }

            content.innerHTML = carouselHtml + bodyHtml;
            document.getElementById('detail-modal').classList.remove('hidden');
        }

        window.moveCarousel = function(dir) {
            if (currentCarouselPhotos.length <= 1) return;
            document.getElementById(`c-img-${currentCarouselIdx}`).classList.remove('active');
            currentCarouselIdx += dir;
            if (currentCarouselIdx < 0) currentCarouselIdx = currentCarouselPhotos.length - 1;
            if (currentCarouselIdx >= currentCarouselPhotos.length) currentCarouselIdx = 0;
            document.getElementById(`c-img-${currentCarouselIdx}`).classList.add('active');
        }

        function closeDetail() { document.getElementById('detail-modal').classList.add('hidden'); }

    </script>
</body>
</html>
